<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="JetenderG">
    <meta name="keywords" content="tic,tac,toe,game,fun">
    <meta name="description" content="This is a regular game of tic tac toe">
    <link type="text/css" rel="stylesheet" href="style.css">
    <title>Tic-Tac-Toe</title>
</head>

<body>
    <div class="title heading">
        <h1>Tic Tac Toe</h1>
    </div>
    <div class="container game-screen">
        <div class="sidebar sidebar-left bar"></div>
        <div class="middleBar gameScreen bar">
            <div class="tic-tac-toe game">
                <div id="box-1" class="box" data-num="1"></div>
                <div id="box-2" class="box" data-num="2"></div>
                <div id="box-3" class="box" data-num="3"></div>
                <div id="box-4" class="box" data-num="4"></div>
                <div id="box-5" class="box" data-num="5"></div>
                <div id="box-6" class="box" data-num="6"></div>
                <div id="box-7" class="box" data-num="7"></div>
                <div id="box-8" class="box" data-num="8"></div>
                <div id="box-9" class="box" data-num="9"></div>
            </div>
        </div>
        <div class="sidebar sidebar-right bar"></div>
    </div>
    <div class="footer"></div>

    <script defer>
        const winningCombos = [
            [1, 2, 3],
            [4, 5, 6],
            [7, 8, 9],
            [1, 4, 7],
            [2, 5, 8],
            [3, 6, 9],
            [1, 5, 9],
            [2, 5, 7]
        ];
        let player_one = {
            name: "playerOne",
            wins: 0,
            turns: [],
            mark: 'x',
            color: 'red'
        }
        let player_two = {
            name: "playerTwo",
            wins: 0,
            turns: [],
            mark: 'o',
            color: 'green'
        }
        let turn, winner;

        let toEnableTickingonBox = (player, element) => {
            element.style.background = player.color
            element.dataset.player = player.mark
            player.turns.push(Number(element.dataset.num))
            checkIfWin(player)
            if (turn === player_one) {
                turn = player_two
            } else {
                turn = player_one
            }
        }
        let checkIfBoxBeenTicked = (turn, element) => {
            if (element.dataset.player === 'x' || element.dataset.player === 'o') {
                return alert('Has Already Been Captured')
            } else {
                toEnableTickingonBox(turn, event.target)
            }
        }

        function checkIfWin(player){
            let i;
            winningCombos.forEach(combo => {
                i = 0;
                recursiveChecks(player.turns, combo, i)
            });
        }

        let recursiveChecks = (turns, combo, i) => {
            console.log(turns,combo,i)
            if (i > 2) {
              prompt('Winner')
               turn.wins++; 
            } else if (turns[i] === combo[i]) {
                console.log(":hreh")
                i++
                recursiveChecks(turns, combo, i)
            } else {
                return;
            }
        }

        function gameStart() {
            turn = player_one;
            const box_list = document.getElementsByClassName('box');
            for (let i = 0; i < box_list.length; i++) {
                box_list[i].addEventListener('click', () => (checkIfBoxBeenTicked(turn, event.target)))
            }
        }
        gameStart();
        //
    </script>
</body>

</html>